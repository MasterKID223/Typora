## 笔试

题目：https://blog.csdn.net/Qmtdearu/article/details/137611735

### 第一题-HashMap

价格单：factor计费因子用一个map把每个factor和其对应的价格保存起来。

用户信息存储：用一个HashMap保存已经处理过的日志

每个用户的计费价格：使用一个HashMap保存

输入：

```
5
1627845600,client1,factorA,10
1627845605,client2,factorB,15
1627845610,client1,factorA,5
1627845615,client1,factorB,8
1627845620,client2,factorB,20
2
factorA,5
factorB,7
```

输出：

```
client1,131
client2,245
```

代码：

```java
package com.example.juc.huawei;
import java.util.*;

/**
 * @author mkid
 * @version 1.0
 * @description 第一题
 * @date 2024/4/24 16:52
 */
public class P1 {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt();
        sc.nextLine();

        List<String[]> logs = new ArrayList<>();
        Set<String> seen = new HashSet<>();
        for (int i = 0; i < n; i ++) {
            String[] log = sc.nextLine().split(",");
            String key = log[0] + log[1] + log[2];
            if (!seen.contains(key)) {  // map和set联合使用，保证log日志只取第一条
                logs.add(log);
                seen.add(key);
            }
        }
        int m = sc.nextInt();
        sc.nextLine();
        Map<String, Integer> prices = new HashMap<>();
        for (int i = 0; i < m; i ++) {
            String[] price = sc.nextLine().split(",");
            prices.put(price[0], Integer.parseInt(price[1]));
        }
        Map<String, Integer> bills = new HashMap<>();  // <client, res>f
        for (String[] log : logs) {
            String client = log[1];
            String fac = log[2];
            int timeLong = Integer.parseInt(log[3]);
            if (timeLong > 100 || timeLong < 0) continue;
            int res = prices.getOrDefault(fac, 0) * timeLong;
            bills.put(client, bills.getOrDefault(client, 0) + res);
        }
        List<String> ans = new ArrayList<>(bills.keySet());
        Collections.sort(ans);
        for (String cid : ans) {
            System.out.println(cid + "," + bills.get(cid));
        }
    }
}
```

### 第二题-并查集

并查集

输入：

```
5
0 0 50 0 0
0 0 0 25 0
50 0 0 0 15
0 25 0 0 0
0 0 15 0 0
```

输出：

```
65 25
```

代码：

```java
package com.example.juc.huawei;
import java.io.*;
import java.util.*;

/**
 * @author mkid
 * @version 1.0
 * @description 第二题，并查集
 * @date 2024/4/24 22:44
 */
public class P2 {

    static int[] pre;
    static int[] sim;

    static int find(int x) {
        if (x == pre[x]) return pre[x];
        return pre[x] = find(pre[x]);
    }

//    static void merge(int a, int b) {
//        int pa = find(a), pb = find(b);
//        pre[pb] = pa;
//    }

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String[] s = br.readLine().split("\\s+");
        int n = Integer.parseInt(s[0]);
        int[][] g = new int[n][n];
        pre = new int[n];
        sim = new int[n];
        for (int i = 0; i < n; i ++) {
            s = br.readLine().split("\\s+");
            for (int j = 0; j < n; j ++) {
                g[i][j] = Integer.parseInt(s[j]);
            }
        }
        // 初始化并查集
        for (int i = 1; i < n; i ++) {
            pre[i] = i;
//            sim[i] = 0;
        }
        for (int i = 0; i < n; i ++) {
            for (int j = i + 1; j < n; j ++) {  // 上三角遍历
                if (g[i][j] > 0) {
                    int pi = find(i), pj = find(j);
                    if (pi != pj) {
                        pre[pj] = pi;
                        sim[pi] += sim[pj];
                    }
                    sim[pi] += g[i][j];
                }
            }
        }

        List<Integer> res = new ArrayList<>();
        for (int i = 0; i < n; i ++) {
            if (pre[i] == i) {
                res.add(sim[i]);
            }
        }
        Collections.sort(res, Collections.reverseOrder());
        for (int i : res) {
            System.out.print(i + " ");
        }
        System.out.println();
    }
}
```

代码最初版本：

```java
package com.example.juc.huawei;
import java.util.*;

/**
 * @author mkid
 * @version 1.0
 * @description 第二题，并查集的另一种写法
 * @date 2024/4/24 23:46
 */
public class P22 {

    static final int N = 910;
    static int[][] g;

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt();
        g = new int[n][n];
        for (int i = 0; i < n; i ++) {
            for (int j = 0; j < n; j ++) {
                g[i][j] = sc.nextInt();
            }
        }
        UnionSet unionSet = new UnionSet(n);
        for (int i = 0; i < n; i ++) {
            for (int j = i + 1; j < n; j ++) {
                if (g[i][j] > 0) {
                    unionSet.merge(i, j);
                }
            }
        }
        int[] parent = unionSet.getParent();
        Map<Integer, Set<Integer>> map = new HashMap<>();  // 第i幅图下和它同类的图片编号(包括他自己)
        for (int i = 0; i < n; i ++) {
            int p = unionSet.getAncient(i);
            if (!map.containsKey(p)) {
                map.put(p, new HashSet<>());
            }
            map.get(p).add(i);
        }
        StringBuilder sb = new StringBuilder();
        List<Integer> res = new ArrayList<>();
        for (Set<Integer> set : map.values()) {
            int sum = 0;  // 相似度
            for (int u : set) {
                for (int v : set) {
                    sum += g[u][v];
                }
            }
            res.add(sum / 2);  // i -> j 和 j -> i算了两次
        }
        res.sort((a, b) -> b.compareTo(a));
        for (int k : res) {
            sb.append(k + " ");
        }
        System.out.println(sb.toString().trim());
    }

}

class UnionSet {
    int[] parent;

    public int[] getParent() {
        return parent;
    }

    public UnionSet(int size) {
        parent = new int[size];
        for (int i = 0; i < size; i ++) {
            parent[i] = i;
        }
    }

    void merge(int a, int b) {
        a = getAncient(a);
        b = getAncient(b);
        parent[b] = a;
    }

    int getAncient(int i) {
        return i == parent[i] ? i : getAncient(parent[i]);
    }
}
```

### 第三题-

把exposed里的所有节点暴力dfs一遍，看哪个到达的节点数最多。

输入：

```
4
1 0 0 0
0 1 2 0
0 1 1 4
0 0 3 1
1 3
```

输出：

```
3
```

代码：

```java
package com.example.juc.huawei;

import java.util.Scanner;
import java.io.*;

/**
 * @author mkid
 * @version 1.0
 * @description 第三题，DFS + 暴力遍历
 * @date 2024/4/25 0:36
 */
public class P3 {

    static int n;
    static final int N = 30;
    static int[][] a = new int[N][N];
    static boolean[] st = new boolean[N];

    static int dfs(int id, int ra) {  // ra是权限
        int num = 0;
        for (int i = 0; i < n; i ++) {
            if (id == i || a[id][i] == 0) continue;  // id == i是自己到自己
            if (ra >= a[id][i]) {
                if (st[i]) continue;
                st[i] = true;
                num += dfs(i, a[id][i]);
                st[i] = false;
            }
        }
        return num + 1;  // 加上当前节点
    }

    public static void main(String[] args) throws IOException {
//        Scanner sc = new Scanner(System.in);
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String[] s = br.readLine().split("\\s+");
        n = Integer.parseInt(s[0]);
        for (int i = 0; i < n; i ++) {
            s = br.readLine().split("\\s+");
            for (int j = 0; j < n; j ++) {
                a[i][j] = Integer.parseInt(s[j]);
            }
        }
        int x;
        int res = -1, ans = 0;
        s = br.readLine().split("\\s+");
        for (String item : s) {
            x = Integer.parseInt(item);
//            for (int i = 0; i < n; i ++) {
//            if (x == i) continue;  // x是断开了，不访问
            st[x] = true;
            int t = dfs(x, 10);
            st[x] = false;
            if (t > ans) {
                ans = t;
                res = x;
            }
//            }
        }
        System.out.println(res);
    }

}
```

