## JVM

### 静态代理和动态代理

静态代理和动态代理是实现代理模式的两种主要方式，它们在软件开发中用于在访问对象时提供额外的功能，如访问控制、日志记录、延迟初始化等。下面是静态代理和动态代理的概述以及它们之间的区别。

#### 静态代理

静态代理是在编译时就已经实现的代理。这意味着代理类在编译前就已经存在，并且是手动编写的。静态代理通常要求代理类和目标对象实现相同的接口或继承相同的类。

- **优点**：
  - 易于理解和实现。
  - 对于简单的代理场景，可以快速地提供解决方案。

- **缺点**：
  - 如果接口增加方法，那么目标对象和其代理类都需要进行修改，不利于维护。
  - 为每个目标类编写一个代理类会导致大量的重复代码。

#### 动态代理

动态代理，与静态代理相对，是在程序运行时动态创建的代理。它不需要事先编写代理类的代码，而是在运行时动态地将代理对象与目标对象绑定。Java中的动态代理主要通过`java.lang.reflect.Proxy`类和`InvocationHandler`接口实现。

- **优点**：
  - 动态代理避免了静态代理中的大量重复代码和接口方法变更问题，具有更好的扩展性和灵活性。
  - 可以动态地为多个类生成代理，减少编码工作量和维护成本。

- **缺点**：
  - 实现复杂度高于静态代理。
  - 性能开销相对较大，因为动态代理的实现涉及到反射等机制。

#### 区别总结

- **实现时机**：静态代理是编译时实现的，而动态代理是运行时动态生成的。
- **代码复用性**：动态代理比静态代理有更好的复用性和灵活性。
- **性能**：静态代理的性能通常比动态代理要好，因为动态代理的实现需要通过反射等机制，这会增加一定的运行时开销。
- **易用性**：静态代理更简单直接，易于理解；动态代理虽然实现复杂，但能提供更加灵活和强大的代理机制。

选择哪一种代理方式取决于具体的应用场景和对性能、灵活性的要求。
