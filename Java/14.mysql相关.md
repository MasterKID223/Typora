### 服务器上配置MySQL远程连接

直接安装MySQL：`sudo apt-get install mysql-server`。

初始化root密码：[[博客](https://linuxnightly.com/error-1698-28000-access-denied-for-user-rootlocalhost/)]

执行`mysql -u root -p`时出现如下错误：

```
ERROR 1698 (28000): Access denied for user 'root'@'localhost'
```

```shell
sudo mysql -u root
```

```
mysql> USE mysql;
mysql> UPDATE user SET plugin='mysql_native_password' WHERE User='root';
mysql> FLUSH PRIVILEGES;
```

```
mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password_here';
mysql> exit;
```

```shell
sudo systemctl restart mysql
```

```shell
mysql -u root -p
```

在本地远程连接连接不上：[[博客](https://tableplus.com/blog/2019/10/lost-connection-mysql-reading-initial-communication-package.html)] [[博客园](https://www.cnblogs.com/youqc/p/10476605.html)]

~~把`/etc/mysql/mysql.conf.d/mysqld.cnf`中的`#bind-address = 127.0.0.1`注释掉。~~

~~然后`sudo service mysql restart`。~~

最后原因是：在最开始初始化root密码时，指定了root@localhost，那就只能localhost访问，所以修改成root@%，让所有ip都可以访问。

### hash索引





### MySQL主从同步如何保证数据一致性？

https://zhuanlan.zhihu.com/p/715541687

分布式情况下，主从的一致性通过binlog的：同步复制、异步复制、半同步复制保证一致性。



### 什么时候要创建唯一索引

创建唯一索引通常是为了确保数据的一致性和唯一性，以及优化某些类型的查询性能。以下是一些推荐创建唯一索引的情况：

1. **保证数据的唯一性**：当你希望确保某个列或一组列中的值是唯一的，防止插入重复数据时，可以考虑创建唯一索引。例如，用户ID、电子邮件地址、手机号码等通常是唯一的标识符，适合创建唯一索引。

2. **替代主键**：在某些情况下，表中可能没有合适的列作为主键，但又需要确保某些列的值是唯一的，这时可以创建唯一索引来达到类似的效果。

3. **加速查询**：当查询经常需要基于某个列或列组合来查找数据，并且这个列或列组合具有高选择性（即大部分查询能够快速定位到少量记录），那么创建唯一索引可以帮助加速这些查询。

4. **强制业务规则**：在某些业务逻辑中，要求某些数据必须是唯一的。例如，在订单处理系统中，订单号必须是唯一的。在这种情况下，创建唯一索引可以强制执行这一业务规则。

5. **防止重复插入**：如果应用程序逻辑中存在可能导致重复数据插入的风险，创建唯一索引可以帮助防止这种情况发生，从而简化错误处理和数据验证过程。

6. **辅助外键约束**：在涉及到引用完整性的场景中，如果一个表的某列经常作为另一个表的外键使用，并且这个列上的值需要是唯一的，那么创建唯一索引可以支持外键约束并提高查询效率。

7. **避免使用频率较低的单列索引**：如果多个单列索引在功能上可以由一个唯一索引代替，并且这样做可以减少索引的数量和维护成本，那么可以考虑用唯一索引来替代多个单列索引。

需要注意的是，虽然唯一索引可以带来上述好处，但它们也会增加数据插入、更新和删除操作的开销，因为每次修改数据时都需要维护索引结构。因此，在决定是否创建唯一索引时，应该综合考虑应用的需求和数据库的整体性能。
