### 构建Web应用

视图层：html页面。

使用thymeleaf框架，控制业务层到视图层的数据显示。要返回的视图html文件的路径是`resources/templates/*.html`。

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>视图</title>
</head>
<body>
    <div>
        <h1>显示请求结果</h1>
        <p th:text="${title}"></p>
        <p th:text="${time}"></p>
    </div>
</body>
</html>
```

业务层（Controller）：

```java
import org.springframework.ui.Model;

@Controller
public class QuickController {
	
    // Model表示模型，存储数据。这个数据最后是放在request作用域。
    // 放在HttpServletRequest的作用域中
    @RequestMapping("/exam/quick")
    public String quick(Model model) {
        // 业务处理结果数据，放入到Model模型
        model.addAttribute("title", "Web开发");
        model.addAttribute("time", LocalDateTime.now());
        return "quick";
    }
}
```

### Json视图

前后端分离的模式一般采取这样的方式。后端只返回前端请求的json格式数据，没有显示视图的功能。

返回json的两种方式：

```java
@Controller
public class JSONViewController {

    @RequestMapping("/exam/json")
    public void exam1(HttpServletResponse response) throws IOException {
        String json = "{\"name\": \"lisi\", \"age\": \"20\"}";
        response.setContentType("application/json;charset=utf-8");
        PrintWriter out = response.getWriter();
        out.println(json);
        out.flush();
        out.close();
    }

    @RequestMapping("/exam/json2")
    @ResponseBody public User exam2() {
        User user = new User();
        user.setName("张三");
        user.setAge(20);
        return user;
    }
}
```

其中，`PrintWriter`是一个用于将数据写入文本输出流的类。它提供了许多方便的方法来写入各种数据类型的值，如整数、浮点数、字符、字符串等。PrintWriter类还提供了一些重载的print和println方法，可以打印对象的值或调用对象的toString方法以获得其字符串表示形式。
`HttpServletResponse`的`getWriter()`方法返回一个`PrintWriter`对象，可以用于将文本数据写入HTTP响应的输出流中。具体来说，它可以将文本数据以字符流的形式写入到响应的输出流中，使得客户端可以接收到响应内容。

在使用getWriter方法之前，需要先设置响应的内容类型（即Content-Type）和字符编码（即Charset）。可以使用setContentType和setCharacterEncoding方法来设置响应的Content-Type和Charset。

`@ResponseBody`的写法就等同于：

```java
String json = "{\"name\": \"lisi\", \"age\": \"20\"}";
response.setContentType("application/json;charset=utf-8");
PrintWriter out = response.getWriter();
out.println(json);
out.flush();
out.close();
```
