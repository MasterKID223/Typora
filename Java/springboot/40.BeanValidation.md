### BeanValidation

Bean对象：

```java
@Data
public class ArticleVO {

    // 文章主键
    private Integer id;

    @NotNull(message = "必须有作者")
    private Integer userId;

    // 同一个属性可以指定多个注解
    @NotBlank(message = "文章必须有标题")
    // @Size中null认为时有效值，所以需要@NotBlank
    @Size(min = 3, max = 30, message = "标题必须3个字以上")
    private String title;

    @NotBlank(message = "文章必须有内容")
    @Size(min = 8, max = 30, message = "内容必须8个字以上")
    private String summary;

    @DecimalMin(value = "0", message = "已读最小是0")
    private Integer readCount;

    @Email(message = "邮箱格式不正确")
    private String email;
}
```

Controller方法：

记得加注解`@RequestBody`

```java
@RestController
public class ArticleController {

    /**
     * @Validated: 验证Bean
     * BindingResult: 包含Bean的验证结果
     */
    @PostMapping("/param/add")
    public Map<String, Object> addArticle(@Validated @RequestBody ArticleVO articleVO, BindingResult br) {
        Map<String, Object> map = new HashMap<>();  // 存验证失败的参数信息
        if (br.hasErrors()) {
            List<FieldError> fieldErrors = br.getFieldErrors();
            for (int i = 0; i < fieldErrors.size(); i ++) {
                FieldError field = fieldErrors.get(i);
                map.put(i + "_" + field.getField(), field.getDefaultMessage());
            }
        }
        return map;
    }
}
```

测试：

```http
### 参数验证
POST http://localhost:8080/param/add
Content-Type: application/json

{
  "id": 0,
  "userId": 123,
  "title": "毕业设计",
  "summary": "毕业设计的内容23131331331323",
  "readCount": 0,
  "email": "123@qq.com"
}
```

