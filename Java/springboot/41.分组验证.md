### 分组验证

上面的 AriticleVO 用来新增文章， 新的文章主键 id 是系统生成的。现在要修改文章，比如修改某个文章的
title，summary， readCount，email 等。此时 id 必须有值，修改这个 id 的文章。 新增和修改操作对 id 有不同的
要求约束要求。通过 group 来区分是否验证。
group 是 Class 作为表示， java 中包加类一定是唯一的， 这个标识没有其他实际意义。

```java
@Data
public class ArticleVO {

    public static interface AddGroup{}
    public static interface EditGroup{}


    // 文章主键
    @NotNull(message = "文章主键不能是空", groups = { EditGroup.class })
    private Integer id;

    @NotNull(message = "必须有作者", groups = { AddGroup.class, EditGroup.class})
    private Integer userId;

    // 同一个属性可以指定多个注解
    @NotBlank(message = "文章必须有标题", groups = { AddGroup.class, EditGroup.class})
    // @Size中null认为时有效值，所以需要@NotBlank
    @Size(min = 3, max = 30, message = "标题必须3个字以上", groups = { AddGroup.class, EditGroup.class})
    private String title;

    @NotBlank(message = "文章必须有内容", groups = { AddGroup.class, EditGroup.class})
    @Size(min = 8, max = 30, message = "内容必须8个字以上", groups = { AddGroup.class, EditGroup.class})
    private String summary;

    @DecimalMin(value = "0", message = "已读最小是0", groups = { AddGroup.class, EditGroup.class})
    private Integer readCount;

    @Email(message = "邮箱格式不正确", groups = { AddGroup.class, EditGroup.class})
    private String email;
}
```

分组验证的时候要给`@Validated`注解添加分组的参数：

```java
@PostMapping("/param/add")
public Map<String, Object> addArticle(@Validated({ArticleVO.AddGroup.class}) @RequestBody ArticleVO articleVO, BindingResult br) {
    Map<String, Object> map = new HashMap<>();  // 存验证失败的参数信息
    if (br.hasErrors()) {
        List<FieldError> fieldErrors = br.getFieldErrors();
        for (int i = 0; i < fieldErrors.size(); i ++) {
            FieldError field = fieldErrors.get(i);
            map.put(i + "_" + field.getField(), field.getDefaultMessage());
        }
    }
    return map;
}

@PostMapping("/param/edit")
public Map<String, Object> editArticle(@Validated({ArticleVO.EditGroup.class}) @RequestBody ArticleVO articleVO, BindingResult br) {
    Map<String, Object> map = new HashMap<>();  // 存验证失败的参数信息
    if (br.hasErrors()) {
        List<FieldError> fieldErrors = br.getFieldErrors();
        for (int i = 0; i < fieldErrors.size(); i ++) {
            FieldError field = fieldErrors.get(i);
            map.put(i + "_" + field.getField(), field.getDefaultMessage());
        }
    }
    return map;
}
```

