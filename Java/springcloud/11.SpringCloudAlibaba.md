# Spring Cloud Alibaba

和Springboot版本对应说明：[官方](https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E)

[官方文档](https://spring.io/projects/spring-cloud-alibaba#learn)

<img src="./pic/image-20230807005013616.png" alt="image-20230807005013616" style="zoom:50%;" />

### naocs注册中心

详细操作和介绍见java目录下的21.nacos的使用。

### 快速入门

在创建naocs项目时，使用start.aliyun.com构建SpringCloudAlibaba项目。

创建provider

```java
@RestController
public class ProviderController {

    @GetMapping("hello")
    public String hello() {
        return "provider: hello";
    }
}

@SpringBootApplication
@EnableDiscoveryClient
public class ProviderApplication {

    public static void main(String[] args) {
        SpringApplication.run(ProviderApplication.class, args);
    }

}
```

```yml
server:
  port: 8081
spring:
  application:
    name: nacos-provider-service
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848
        username: nacos
        password: nacos
```

创建consumer类

```java
@RestController
public class ConsumerController {

    @Autowired
    private DiscoveryClient discoveryClient;

    @GetMapping("discovery")
    public String discovery(String serviceId) {
        // 根据实例名称拿到实例集合
        List<ServiceInstance> instances = discoveryClient.getInstances(serviceId);
        ServiceInstance serviceInstance = instances.get(0);
        System.out.println(serviceInstance.getHost() + ":" + serviceInstance.getPort());
        return serviceInstance.getHost() + ":" + serviceInstance.getPort();
    }
}

@SpringBootApplication
@EnableDiscoveryClient
public class NacosConsumerApplication {

    public static void main(String[] args) {
        SpringApplication.run(NacosConsumerApplication.class, args);
    }

}
```

测试运行

<img src="./pic/image-20230811224200762.png" alt="image-20230811224200762" style="zoom:50%;" />

### 和Feign结合