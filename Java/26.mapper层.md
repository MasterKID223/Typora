## mapper层的作用

在Spring Boot项目中，Mapper层通常用于实现数据访问对象（DAO，Data Access Object）。它的主要作用是将应用程序的业务逻辑与底层数据库交互分离开来，提供一种抽象的方式来访问数据库。

以下是Mapper层的主要作用：

1. 数据库交互：Mapper层负责与数据库进行交互，包括执行SQL查询、更新、插入和删除等操作。它通过将数据库操作封装在方法中，提供了一种更加面向对象的方式来操作数据库，而不必直接编写SQL语句。

2. 实体映射：Mapper层通常与实体类（Entity）一起工作，负责将数据库中的数据映射到实体类的对象中，并将实体类的对象映射回数据库表的行。这样，开发人员可以使用面向对象的方式来处理数据，而不必关心数据库表的细节。

3. 数据访问抽象：Mapper层提供了一个抽象的数据访问接口，使应用程序的其他部分（如业务逻辑层和控制器层）能够轻松地访问和操作数据库，而不必关心数据库连接、SQL语句的构建和结果集的处理等细节。

4. 事务管理：Mapper层通常与Spring的事务管理机制集成，可以确保数据库操作在事务范围内执行，从而保持数据的一致性和完整性。

总之，Mapper层在Spring Boot项目中起到了将业务逻辑与数据访问的分离作用，提供了一种高级别的抽象，使开发人员能够更轻松地操作数据库，同时保持了代码的可维护性和可测试性。通常，开发人员会使用ORM（对象关系映射）工具如MyBatis或Hibernate来实现Mapper层。

### mybatis-plus例子

当使用 MyBatis-Plus 进行数据访问时，通常首先需要定义实体类、Mapper 接口和 Service 类。以下是一个简单的示例，假设你有一个名为 `User` 的实体类，需要对其进行数据访问操作：

1. 定义实体类 `User`：

```java
import com.baomidou.mybatisplus.annotation.IdType;
import com.baomidou.mybatisplus.annotation.TableId;
import com.baomidou.mybatisplus.annotation.TableName;
import lombok.Data;

@Data
@TableName("user") // 指定数据库表名
public class User {
    @TableId(type = IdType.AUTO) // 指定主键生成策略
    private Long id;
    private String username;
    private String email;
}
```

2. 创建 Mapper 接口 `UserMapper`，继承 `BaseMapper` 接口，这样你可以继承 MyBatis-Plus 提供的常用的数据访问方法，而不必自己写 SQL 查询语句：

```java
import com.baomidou.mybatisplus.core.mapper.BaseMapper;

public interface UserMapper extends BaseMapper<User> {
    // 这里可以自定义一些特殊的查询方法
}
```

3. 创建 Service 类 `UserService`，并注入 `UserMapper`：

```java
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service
public class UserService {
    private final UserMapper userMapper;

    @Autowired
    public UserService(UserMapper userMapper) {
        this.userMapper = userMapper;
    }

    // 可以在这里定义业务逻辑方法，使用 userMapper 完成数据访问操作
}
```

4. 在 Spring Boot 配置文件中配置 MyBatis-Plus 相关的配置，确保数据源和其他必要配置正确。

5. 现在，你可以在 `UserService` 中定义各种业务逻辑方法，使用 `UserMapper` 来执行数据库操作，如查询、插入、更新等。以下是一个示例：

```java
@Service
public class UserService {
    private final UserMapper userMapper;

    @Autowired
    public UserService(UserMapper userMapper) {
        this.userMapper = userMapper;
    }

    public User getUserById(Long userId) {
        return userMapper.selectById(userId);
    }

    public void createUser(User user) {
        userMapper.insert(user);
    }

    public void updateUser(User user) {
        userMapper.updateById(user);
    }

    public void deleteUser(Long userId) {
        userMapper.deleteById(userId);
    }
}
```

这个示例展示了如何使用 MyBatis-Plus 来简化数据访问层的开发。MyBatis-Plus 提供了许多内置的数据访问方法，使得数据访问变得非常方便，同时还支持自定义查询方法和复杂查询条件的构建。

