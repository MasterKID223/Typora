### 2022.03.12（周日）

训练的时候，那历史数据训练，测试的时候要用新的场景（实体一样，时间不一样），把新实体（战斧-1）映射到训练集中的相同的实体（战斧-0）上。

空间邻域实验，邻域内各种分布的相似性确定是训练集上的哪个实体。

根据经纬度，5s大小的窗口不相交，取一个头实体（输入，敌方导弹），在一个方格内，把作战单位信息（多个维度）和头实体嵌入成一个多维向量。



### 2023.03.24（周五）

考虑到前端展示还是以图谱的形式，返回的数据要从事件链变成4元组的链（多1元参数，事件链唯一的索引，这个索引不参加训练）。

### 2023.03.25（周六）

- [x] 怎么把字符串送到模型前面的4种嵌入层？（还是要对应成此表的索引）
- [x] 模型怎么输出字符串？（还是要对应成此表的索引）
- [ ] 如果有所有事件的索引表，就可以计算输出的事件和表中事件的距离，把距离最近的当成预测结果？
- [ ] 距离函数怎么定义？（文本之间的相似性）
- [x] 词表要构建的足够大。词表构建的时候，分成三个构建（head, rel, tail），时间窗口不构建词表
- [ ] 位置信息怎么加？
- [x] 还是要把一个序列切成四元组序列，这个序列要由三个词表对应的索引共同构成。
- [ ] 输入的时候，也做成通道独立的预测方法，参考(32, 336, 7) -> (32, 7, 336)，用在这里就是(32, 10, 4) -> (32, 4, 10)
- [ ] 输出的时候也是分开通道的输出，即(32, 4, 1)，把输出的这三个索引和时间戳，查词表后连接在一起，返回最后的事件输出。

### 2023.03.28（周二）

- [x] 由于头、关系、尾三个表是分开构建的，那么模型最后的输出每个通道的长度会不一样（分别是前面三个表的长度），从encoder出来的结果应该再按通道分开，每个通道映射成各自表的长度，然后分开算CELoss。

### 2023.03.29 （周三）

- [ ] 预测的时候，头节点可以固定，不对头节点进行预测。
- [ ] 用基于规则的逻辑预测事件（定义好的规则）。

### 2023.04.02（周日）

世辰可视化需要的数据格式

```json
{
  "nodes": [
    {
      "id": "id0",
      "label": "基地0",
      "img": "src/image/node.png"
    },
    {
      "id": "id1",
      "label": "基地1",
      "img": "src/image/node.png"
    },
  ],
  "edges": [
    {
      "source": "id0",
      "target": "id1"
    },
    {
      "source": "id2",
      "target": "id3"
    },
  ],
}
```

